// Funções Aba Cartões v13.0
function toggleEdicaoCartao(id) {
    const form = document.getElementById(`form-edit-${id}`);
    form.classList.toggle('active');
    
    if(form.classList.contains('active')) {
        const cartao = id === 'nu' ? db.Nubank : db.MercadoPago;
        document.getElementById(`edit-nome-${id}`).value = cartao.nome || (id === 'nu' ? "Nubank" : "Mercado Pago");
        document.getElementById(`edit-limite-${id}`).value = cartao.limite || 0;
        document.getElementById(`edit-meta-${id}`).value = cartao.meta || 0;
        document.getElementById(`edit-fecha-${id}`).value = cartao.fechamento || 0;
        document.getElementById(`edit-venc-${id}`).value = cartao.vencimento || 0;
        document.getElementById(`edit-cor-${id}`).value = cartao.cor;
    }
}

function salvarAlteracoesCartao(id) {
    const cartao = id === 'nu' ? db.Nubank : db.MercadoPago;
    
    cartao.nome = document.getElementById(`edit-nome-${id}`).value;
    cartao.limite = parseFloat(document.getElementById(`edit-limite-${id}`).value) || 0;
    cartao.meta = parseFloat(document.getElementById(`edit-meta-${id}`).value) || 0;
    cartao.fechamento = parseInt(document.getElementById(`edit-fecha-${id}`).value) || 0;
    cartao.vencimento = parseInt(document.getElementById(`edit-venc-${id}`).value) || 0;
    cartao.cor = document.getElementById(`edit-cor-${id}`).value;

    if(id === 'nu') document.documentElement.style.setProperty('--nubank', cartao.cor);
    else document.documentElement.style.setProperty('--mercadopago', cartao.cor);

    document.getElementById(`form-edit-${id}`).classList.remove('active');
    salvar(); // Chama a função de salvar no LocalStorage e atualizar UI
    alert("Configurações aplicadas!");
}
